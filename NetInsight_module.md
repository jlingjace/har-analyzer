# NetInsight - 网络分析 SaaS 平台

## 产品概述
NetInsight 是一个专业的网络分析 SaaS 平台，支持用户上传各种网络抓包文件（如 tcpdump、Wireshark PCAP、浏览器 HAR 等），通过强大的后端数据分析引擎生成多维度的网络环境报告，帮助用户和网络管理员快速识别网络性能瓶颈、安全威胁及流量模式问题。

## 核心价值
- 简化复杂网络数据分析过程
- 提供直观可视化的网络性能指标
- 自动检测网络异常和安全威胁
- 支持历史数据比较和趋势分析
- 生成专业的网络诊断报告

## 系统架构
NetInsight 采用模块化微服务架构，各功能模块通过 API 相互调用，实现松耦合的系统设计。

### 模块划分

#### 1. 用户认证与管理模块 (IAM)
- 用户注册、登录、注销功能
- 多因素认证 (MFA)
- 单点登录 (SSO) 支持
- 社交媒体登录集成
- 用户个人资料管理
- 密码重置和账户恢复
- 用户组织和团队管理

#### 2. 权限控制模块 (Authorization)
- 基于角色的访问控制 (RBAC)
- 自定义权限策略
- API 访问控制
- 资源共享权限管理
- 数据访问权限控制

#### 3. 文件上传与管理模块 (File Management)
- 支持多种抓包文件格式上传 (PCAP, CAP, HAR, etc.)
- 文件格式验证与安全检查
- 大文件分片上传
- 文件存储与版本管理
- 文件元数据管理
- 文件共享与协作功能

#### 4. 数据解析引擎模块 (Packet Parser)
- 多格式抓包文件解析
- 协议识别与解码
- 数据包结构分析
- 会话重构
- 数据提取与标准化
- 解析结果缓存

#### 5. 网络分析核心引擎模块 (Analysis Engine)
- 流量模式分析
- 性能瓶颈检测
- 网络延迟分析
- 带宽利用率计算
- 协议分布统计
- 异常流量识别
- TCP/IP 性能指标计算
- 应用层协议分析

#### 6. 安全分析模块 (Security Analysis)
- 网络安全威胁检测
- 恶意流量识别
- DDoS 攻击模式识别
- 异常连接检测
- 安全漏洞扫描
- 加密流量分析
- 安全合规性检查

#### 7. 报告生成模块 (Report Generation)
- 自定义报告模板
- 多格式报告导出 (PDF, HTML, CSV)
- 交互式报告生成
- 定期报告调度
- 报告共享功能
- 报告历史版本管理

#### 8. 可视化展示模块 (Visualization)
- 交互式仪表板
- 网络拓扑图生成
- 流量热图
- 时间序列图表
- 协议分布饼图
- 自定义图表生成
- 数据钻取功能

#### 9. 告警与通知模块 (Alerts & Notifications)
- 自定义告警规则
- 阈值监控
- 实时告警触发
- 多渠道通知 (邮件, SMS, Webhook)
- 告警历史记录
- 告警严重性分级
- 告警确认与处理流程

#### 10. 订阅与计费模块 (Subscription & Billing)
- 多层级订阅计划
- 按使用量计费选项
- 支付处理集成
- 发票生成
- 订阅管理
- 试用期管理
- 升级/降级处理

#### 11. API 网关 (API Gateway)
- 请求路由
- 认证和授权中间件
- 请求限流
- API 版本控制
- 文档生成
- API 使用统计

#### 12. 数据存储模块 (Data Storage)
- 原始抓包文件存储
- 分析结果存储
- 用户配置存储
- 报告数据存储
- 数据备份与恢复
- 数据生命周期管理

#### 13. 历史分析与比较模块 (Historical Analysis)
- 历史数据存储
- 趋势分析
- 基准比较
- 变化检测
- 长期性能监控
- 历史报告对比

#### 14. 集成模块 (Integration Hub)
- 第三方监控工具集成
- SIEM 系统集成
- 网络管理系统集成
- Webhook 支持
- 自定义 API 集成
- 数据导出接口

#### 15. 管理控制台模块 (Admin Console)
- 系统健康监控
- 用户管理
- 系统配置
- 资源使用统计
- 审计日志查看
- 系统更新管理

## 技术栈
- **前端**: React/TypeScript, D3.js (可视化), Material-UI
- **后端**: Node.js/Express (API 服务), Python (数据分析引擎)
- **数据库**: PostgreSQL (结构化数据), MongoDB (非结构化数据), ClickHouse (时序数据)
- **文件存储**: MinIO/S3 兼容存储
- **缓存**: Redis
- **消息队列**: RabbitMQ/Kafka
- **搜索引擎**: Elasticsearch
- **容器化**: Docker, Kubernetes
- **监控**: Prometheus, Grafana
- **CI/CD**: GitHub Actions/GitLab CI

## 部署架构
- 微服务容器化部署
- 自动扩展配置
- 多区域部署支持
- 数据分析任务弹性调度
- 高可用性设计

NetInsight 核心流程
让我详细描述一下 NetInsight 的几个核心业务流程:

1. 文件上传与分析流程
1.1 文件上传:
    用户通过 Web 界面或 API 上传抓包文件
    文件上传模块验证文件格式和安全性
    大文件通过分片上传处理
    上传完成后，文件存储在对象存储中
1.2 文件解析:
    解析引擎接收文件处理任务
    根据文件类型选择适当的解析器
    将原始抓包数据解析为标准化格式
    提取关键元数据（时间戳、协议、IP等）
1.3 数据分析:
    分析引擎接收解析后的数据
    执行多维度分析（性能、安全、流量模式等）
    生成分析结果和关键指标
    检测异常和潜在问题
1.4 报告生成
    根据分析结果生成综合报告
    创建可视化图表和指标
    提供问题诊断和建议
    保存报告供用户访问
2 用户订阅与权限流程
2.1 订阅管理:
    用户选择订阅计划（基础/专业/企业版）
    完成支付流程
    系统更新用户权限和配额
    定期处理续订和账单
2.2 权限控制:
    基于订阅级别设置功能访问权限
    控制可上传的文件大小和数量
    管理报告生成和导出权限
    控制高级分析功能的使用
3. 团队协作流程
3.1 报告共享:
    用户可与团队成员共享分析报告
    设置不同级别的访问权限
    支持报告协作注释
    跟踪报告访问历史
3.2 团队管理:
    创建和管理团队成员
    分配角色和权限
    管理共享资源
    监控团队资源使用情况
4. 告警与通知流程
4.1 告警配置:
    用户设置自定义告警规则和阈值
    配置通知方式和接收人
    设置告警严重性级别
4.2 告警触发:
    系统检测到符合告警条件的事件
    生成告警记录
    通过配置的渠道发送通知
    记录告警历史和处理状态
模块间交互示例
以下是一个典型的用户分析网络文件的模块交互流程:

1. 用户通过 API 网关 发送登录请求
2. IAM 模块 验证用户身份并返回访问令牌
3. 用户通过 文件上传模块 上传 PCAP 文件
4. 权限模块 验证用户是否有足够的配额和权限
5. 文件管理模块 存储文件并创建元数据记录
6. 数据解析引擎 接收任务并开始解析文件
7. 分析引擎 处理解析后的数据并执行多维度分析
8. 安全分析模块 检查潜在的安全威胁
9. 报告生成模块 创建综合分析报告
10. 可视化模块 生成交互式图表和仪表板
11. 通知模块 向用户发送分析完成通知
12. 用户通过 API 网关 访问分析结果和报告

